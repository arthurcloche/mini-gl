<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test miniGL Import</title>
    <style>
        body {
            background: #1a1a1a;
            color: white;
            font-family: monospace;
            padding: 20px;
        }
        #status {
            margin: 20px 0;
            padding: 10px;
            border: 1px solid #333;
            border-radius: 4px;
        }
        .success { color: #0f0; }
        .error { color: #f00; }
    </style>
</head>
<body>
    <h1>miniGL Import Test</h1>
    <div id="status">Testing...</div>
    <canvas id="test-canvas" width="512" height="512" style="border: 1px solid #333;"></canvas>
    
    <script type="module">
        const statusEl = document.getElementById('status');
        
        try {
            // Test import
            const module = await import('../lib/miniGL/miniGL.js');
            console.log('Module loaded:', module);
            
            const miniGL = module.default || module.miniGL;
            
            if (!miniGL) {
                throw new Error('miniGL not found in module');
            }
            
            // Test instantiation
            const canvas = document.getElementById('test-canvas');
            const gl = new miniGL(canvas, { fps: 60 });
            
            statusEl.innerHTML = '<span class="success">✓ miniGL loaded successfully!</span><br>';
            statusEl.innerHTML += `miniGL class: ${typeof miniGL}<br>`;
            statusEl.innerHTML += `gl instance: ${typeof gl}<br>`;
            statusEl.innerHTML += `gl.render: ${typeof gl.render}<br>`;
            statusEl.innerHTML += `gl.shader: ${typeof gl.shader}<br>`;
            statusEl.innerHTML += `gl.image: ${typeof gl.image}<br>`;
            
            // Test basic rendering
            const shader = gl.shader(`#version 300 es
precision highp float;
uniform float glTime;
in vec2 glUV;
out vec4 fragColor;
void main() {
    vec3 col = 0.5 + 0.5*cos(glTime*0.001+glUV.xyx+vec3(0,2,4));
    fragColor = vec4(col,1.0);
}`);
            
            gl.output(shader);
            gl.render();
            
            statusEl.innerHTML += '<br><span class="success">✓ Basic shader rendering started!</span>';
            
        } catch (error) {
            console.error('Error:', error);
            statusEl.innerHTML = `<span class="error">✗ Error: ${error.message}</span>`;
            statusEl.innerHTML += `<br>Stack: <pre>${error.stack}</pre>`;
        }
    </script>
</body>
</html>