<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>miniGL Basic Setup Example</title>
  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      background-color: #f0f0f0;
      color: #333;
    }
    
    h1 {
      color: #1a1a1a;
      margin-bottom: 30px;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .canvas-container {
      margin-bottom: 30px;
    }
    
    #gl-canvas {
      width: 100%;
      height: 400px;
      background: #000;
      border-radius: 4px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }
    
    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .control-group {
      min-width: 200px;
    }
    
    .control-label {
      display: block;
      margin-bottom: 10px;
      font-weight: bold;
      color: #444;
    }
    
    input[type="range"] {
      width: 100%;
    }
    
    .value-display {
      margin-top: 5px;
      font-size: 0.9em;
      color: #666;
    }
    
    pre {
      background: #282c34;
      color: #abb2bf;
      padding: 20px;
      border-radius: 4px;
      overflow-x: auto;
    }
    
    button {
      background: #4a5568;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      margin-right: 10px;
    }
    
    button:hover {
      background: #2d3748;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>miniGL Basic Setup Example</h1>
    
    <div class="canvas-container">
      <canvas id="gl-canvas"></canvas>
    </div>
    
    <div class="controls">
      <div class="control-group">
        <label class="control-label">Animation Speed</label>
        <input type="range" id="speed-slider" min="0.1" max="5" step="0.1" value="1">
        <div class="value-display">Value: <span id="speed-value">1</span></div>
      </div>
      
      <div class="control-group">
        <label class="control-label">Effect Intensity</label>
        <input type="range" id="intensity-slider" min="0" max="1" step="0.01" value="0.5">
        <div class="value-display">Value: <span id="intensity-value">0.5</span></div>
      </div>
      
      <div class="control-group">
        <button id="toggle-effect">Toggle Effect</button>
        <button id="reset-canvas">Reset</button>
      </div>
    </div>
    
    <h2>Code Example</h2>
    <pre><code>// Import miniGL
import miniGL from './src/js/miniGL.js';

// Create a miniGL instance with canvas ID
const gl = new miniGL('gl-canvas');

// Create a simple fragment shader
const fragmentShader = `#version 300 es
precision highp float;

uniform vec2 uResolution;
uniform float uTime;
uniform float uIntensity;

in vec2 vTexCoord;
out vec4 fragColor;

void main() {
  // Calculate proper aspect ratio
  float aspect = uResolution.y / uResolution.x;
  
  // Get aspect-corrected coordinates
  vec2 uv = vTexCoord;
  uv.y *= aspect;
  
  // Create a gradient pattern
  vec3 color = vec3(0.5 + 0.5 * sin(uTime * 0.001));
  
  // Add circular pattern
  float d = distance(uv, vec2(0.5, 0.5 * aspect));
  color += vec3(1.0 - smoothstep(0.0, 0.5, d)) * uIntensity;
  
  fragColor = vec4(color, 1.0);
}`;

// Create a shader pass
const basePass = gl.pass(fragmentShader);

// Update uniforms and render on each frame
function animate() {
  // Update uniforms
  basePass.uniforms.uIntensity = intensitySlider.value;
  gl.render();
  requestAnimationFrame(animate);
}

animate();</code></pre>
  </div>
  
  <!-- Import miniGL from the correct location -->
  <script type="module">
    import miniGL from '../../src/js/miniGL.js';
    
    // Get DOM elements
    const canvas = document.getElementById('gl-canvas');
    const speedSlider = document.getElementById('speed-slider');
    const intensitySlider = document.getElementById('intensity-slider');
    const speedValue = document.getElementById('speed-value');
    const intensityValue = document.getElementById('intensity-value');
    const toggleButton = document.getElementById('toggle-effect');
    const resetButton = document.getElementById('reset-canvas');
    
    // Update value displays
    speedSlider.addEventListener('input', () => {
      speedValue.textContent = speedSlider.value;
    });
    
    intensitySlider.addEventListener('input', () => {
      intensityValue.textContent = intensitySlider.value;
    });
    
    // Initialize miniGL
    const gl = new miniGL('gl-canvas');
    
    // Flag to toggle the effect
    let effectEnabled = true;
    
    // Create base fragment shader
    const fragmentShader = `#version 300 es
      precision highp float;
      
      uniform vec2 uResolution;
      uniform float uTime;
      uniform float uSpeed;
      uniform float uIntensity;
      
      in vec2 vTexCoord;
      out vec4 fragColor;
      
      void main() {
        // Calculate proper aspect ratio
        float aspect = uResolution.y / uResolution.x;
        
        // Get aspect-corrected coordinates
        vec2 uv = vTexCoord;
        
        // Center the coordinates
        vec2 uvCentered = uv - 0.5;
        // Apply aspect ratio correction
        uvCentered.y *= aspect;
        
        // Time-based animation
        float time = uTime * 0.001 * uSpeed;
        
        // Create a background gradient
        vec3 color1 = vec3(0.1, 0.2, 0.3);
        vec3 color2 = vec3(0.5, 0.2, 0.6);
        vec3 color = mix(color1, color2, uv.x);
        
        // Add a pattern when effect is enabled
        if (uIntensity > 0.0) {
          // Create circular waves
          float dist = length(uvCentered);
          float wave = sin(dist * 20.0 - time * 3.0) * 0.5 + 0.5;
          
          // Apply effect based on intensity
          color = mix(color, vec3(wave), uIntensity);
          
          // Add highlight at center
          color += vec3(0.7, 0.3, 0.9) * (1.0 - smoothstep(0.0, 0.2, dist)) * uIntensity;
        }
        
        fragColor = vec4(color, 1.0);
      }
    `;
    
    // Create the shader pass
    const basePass = gl.pass(fragmentShader, {
      uSpeed: parseFloat(speedSlider.value),
      uIntensity: parseFloat(intensitySlider.value)
    });
    
    // Update uniforms and render on each frame
    function animate() {
      // Update uniforms from controls
      basePass.uniforms.uSpeed = parseFloat(speedSlider.value);
      basePass.uniforms.uIntensity = effectEnabled ? parseFloat(intensitySlider.value) : 0;
      
      // Render the frame
      gl.render();
      
      // Continue animation loop
      requestAnimationFrame(animate);
    }
    
    // Start the animation
    animate();
    
    // Event listeners for controls
    toggleButton.addEventListener('click', () => {
      effectEnabled = !effectEnabled;
      toggleButton.textContent = effectEnabled ? 'Disable Effect' : 'Enable Effect';
    });
    
    resetButton.addEventListener('click', () => {
      speedSlider.value = 1;
      intensitySlider.value = 0.5;
      speedValue.textContent = '1';
      intensityValue.textContent = '0.5';
      effectEnabled = true;
      toggleButton.textContent = 'Disable Effect';
    });
  </script>
</body>
</html> 